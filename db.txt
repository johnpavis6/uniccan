drop table messages;
create table messages(
    id integer AUTO_INCREMENT primary key not null,
    _from varchar(100) not null,
    _to varchar(100) not null,
    message text not null,
    datetime text not null,
    seenstatus int(1) not null,
    foreign key(_from) references users(email),
    foreign key(_to) references users(email)
);

drop table socket_mapping;
create table socket_mapping(
    id integer AUTO_INCREMENT primary key not null,
    email varchar(100),
    socketID varchar(100),
    talking_with varchar(100),
    unique(email,talking_with),
    foreign key(email) references users(email),
    foreign key(talking_with) references users(email)
);

drop table users;
create table users(
    id integer AUTO_INCREMENT primary key not null,
    name text not null,
    email varchar(100) unique not null,
    password text not null,
    gender varchar(6) not null,
    mobile_no varchar(10) unique not null,
    dob text not null,
    education text,
    work_experience int(2),
    work_company_name text,
    work_position text,
    hobbies text,
    extra_curricular_activities text,
    involvements text,
    skills text,
    last_seen text
);
alter table users add column knowledges text;
alter table users add column college_name text;
alter table users drop column work_experience;
alter table users drop column work_company_name;
alter table users drop column work_position;
alter table users add column work_experiences text;
alter table users add column degrees text;

delete from socket_mapping;
update users set last_seen=CURRENT_TIMESTAMP() where last_seen="online";